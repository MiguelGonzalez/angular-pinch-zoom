/*! angular-pinch-zoom - v0.2.9 */
angular.module("ngPinchZoom",[]).directive("ngPinchZoom",function(){function t(t,e,n){function i(t){var e=t.originalEvent?t.originalEvent.touches:t.touches;e.length>=2&&(x=!1,void 0!==O&&(clearTimeout(O),O=void 0)),k=e[0].clientX,T=e[0].clientY,D=Y,E=X,M=0,S=0,1==e.length&&(x?(o(),t.preventDefault()):(x=!0,void 0!==O&&(clearTimeout(O),O=void 0),O=setTimeout(function(){x=!1,O=void 0},275)))}function o(){p=w=d=1,Y=0,X=0,s()}function r(t){var n=0;t.preventDefault(),t.deltaY?n=t.deltaY:t.wheelDelta&&(n=-t.wheelDelta);var i=e[0].getBoundingClientRect(),o=t.pageX-i.left-window.pageXOffset,r=t.pageY-i.top-window.pageYOffset;void 0===j&&(P=j=i.width,Z=q=i.height);var a=o-Y,c=r-X,l=a/j,u=c/q,v=.1;return 0>n?(j+=j*v,q+=q*v):(j-=j*v,q-=q*v),d=j/P,d>m?void(d=m):(Y=o-j*l,X=r-q*u,Y>0?Y=0:P-j>Y&&(Y=P-j),X>0?X=0:Z-q>X&&(X=Z-q),1>=d&&(d=1,Y=0,X=0,j=P,q=Z),void s())}function a(t){var n=t.originalEvent?t.originalEvent.touches:t.touches;if(""===f&&(1===n.length&&d>1?f="swipe":2===n.length&&(f="pinch",w=d,g=l(n),b=n[0].clientX-parseInt((n[0].clientX-n[1].clientX)/2,10)-e[0].offsetLeft-D,I=n[0].clientY-parseInt((n[0].clientY-n[1].clientY)/2,10)-e[0].offsetTop-E)),"swipe"===f)t.preventDefault(),M=n[0].clientX-k,S=n[0].clientY-T,Y=D+M,X=E+S,s();else if("pinch"===f){if(t.preventDefault(),h=l(n),p=h/g,d=p*w,d>m)return void(d=m);Y=b*(1-p)+D+M,X=I*(1-p)+E+S,1>d&&(d=1,Y=0,X=0),s()}}function c(t){var e=t.originalEvent?t.originalEvent.touches:t.touches;""===f||e.length>0||(1>d?(d=1,Y=0,X=0):d>m?(d=m,p=d/w,Y=b*(1-p)+D+M,X=I*(1-p)+E+S):(Y>0?Y=0:u*(1-d)>Y&&(Y=u*(1-d)),X>0?X=0:v*(1-d)>X&&(X=v*(1-d))),s(.1),f="")}function l(t){var e;try{e=Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}catch(n){return 0}return parseInt(e,10)}function s(t){var n=t?"all cubic-bezier(0,0,.5,1) "+t+"s":"",i=[d,0,0,d,Y,X],o="matrix("+i.join(",")+")";e.css({"-webkit-transition":n,transition:n,"-webkit-transform":o+" translate3d(0,0,0)",transform:o})}var u,v,f="",h=0,g=0,d=1,p=1,w=1,m=parseInt(n.maxScale,10);(isNaN(m)||1>=m)&&(m=3);var Y=0,X=0,D=0,E=0,b=0,I=0,k=0,T=0,M=0,S=0,x=!1,N=new Image;N.onload=function(){u=e[0].clientWidth,v=e[0].clientHeight,e.css({"-webkit-transform-origin":"0 0","transform-origin":"0 0"}),e.on("touchstart",i),e.on("touchmove",a),e.on("touchend",c),e.on("wheel",r)},n.ngSrc?N.src=n.ngSrc:N.src=n.src;var O,P,Z,j,q}var e={restrict:"A",scope:!1,link:t};return e});