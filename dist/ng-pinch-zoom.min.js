/*! angular-pinch-zoom - v0.2.8 */
angular.module("ngPinchZoom",[]).directive("ngPinchZoom",function(){function t(t,e,n){function i(t){var e=t.originalEvent?t.originalEvent.touches:t.touches;e.length>=2&&(x=!1,void 0!==O&&(clearTimeout(O),O=void 0)),k=e[0].clientX,T=e[0].clientY,D=Y,E=X,M=0,S=0,1==e.length&&(x?(o(),t.preventDefault()):(x=!0,void 0!==O&&(clearTimeout(O),O=void 0),O=setTimeout(function(){x=!1,O=void 0},275)))}function o(){d=w=p=1,Y=0,X=0,s()}function r(t){var n=0;if(t.preventDefault(),t.deltaY?n=t.deltaY:t.wheelDelta&&(n=-t.wheelDelta),!(p>m&&0>n)){var i=e[0].getBoundingClientRect(),o=t.pageX-i.left-window.pageXOffset,r=t.pageY-i.top-window.pageYOffset;void 0===j&&(P=j=i.width,Z=q=i.height);var a=o-Y,c=r-X,l=a/j,u=c/q,f=.1;if(0>n?(j+=j*f,q+=q*f):(j-=j*f,q-=q*f),p=j/P,p>m)return void(p=m);Y=o-j*l,X=r-q*u,Y>0?Y=0:P-j>Y&&(Y=P-j),X>0?X=0:Z-q>X&&(X=Z-q),1>=p&&(p=1,Y=0,X=0,j=P,q=Z),s()}}function a(t){var n=t.originalEvent?t.originalEvent.touches:t.touches;if(""===v&&(1===n.length&&p>1?v="swipe":2===n.length&&(v="pinch",w=p,g=l(n),b=n[0].clientX-parseInt((n[0].clientX-n[1].clientX)/2,10)-e[0].offsetLeft-D,I=n[0].clientY-parseInt((n[0].clientY-n[1].clientY)/2,10)-e[0].offsetTop-E)),"swipe"===v)t.preventDefault(),M=n[0].clientX-k,S=n[0].clientY-T,Y=D+M,X=E+S,s();else if("pinch"===v){if(t.preventDefault(),h=l(n),d=h/g,p=d*w,p>m)return void(p=m);Y=b*(1-d)+D+M,X=I*(1-d)+E+S,1>p&&(p=1,Y=0,X=0),s()}}function c(t){var e=t.originalEvent?t.originalEvent.touches:t.touches;""===v||e.length>0||(1>p?(p=1,Y=0,X=0):p>m?(p=m,d=p/w,Y=b*(1-d)+D+M,X=I*(1-d)+E+S):(Y>0?Y=0:u*(1-p)>Y&&(Y=u*(1-p)),X>0?X=0:f*(1-p)>X&&(X=f*(1-p))),s(.1),v="")}function l(t){var e=Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2));return parseInt(e,10)}function s(t){var n=t?"all cubic-bezier(0,0,.5,1) "+t+"s":"",i=[p,0,0,p,Y,X],o="matrix("+i.join(",")+")";e.css({"-webkit-transition":n,transition:n,"-webkit-transform":o+" translate3d(0,0,0)",transform:o})}var u,f,v="",h=0,g=0,p=1,d=1,w=1,m=parseInt(n.maxScale,10);(isNaN(m)||1>=m)&&(m=3);var Y=0,X=0,D=0,E=0,b=0,I=0,k=0,T=0,M=0,S=0,x=!1,N=new Image;N.onload=function(){u=e[0].clientWidth,f=e[0].clientHeight,e.css({"-webkit-transform-origin":"0 0","transform-origin":"0 0"}),e.on("touchstart",i),e.on("touchmove",a),e.on("touchend",c),e.on("wheel",r)},n.ngSrc?N.src=n.ngSrc:N.src=n.src;var O,P,Z,j,q}var e={restrict:"A",scope:!1,link:t};return e});